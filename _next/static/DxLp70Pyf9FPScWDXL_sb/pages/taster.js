(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"9i+O":function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/taster",function(){return r("WbrO")}])},"FdL+":function(e,t,r){"use strict";var n=r("rePB"),a=r("q1tI"),o=r.n(a),i=r("LvDl"),s=r.n(i),c=r("YtlM"),u=o.a.createElement,l=function(e){return u("div",{className:"section"},u("h4",null,e.title),s.a.map(e.selections.selections,(function(t,r){return u("label",{key:r,className:"selectable"},r,u("input",{type:"checkbox",checked:t,onChange:function(){return e.selections.toggle(r)}}),u("span",{className:"checkmark"},t?"\u2713":""))})),s.a.size(e.selections.selections)>1&&u("div",null,u("span",{className:"all-or-none",onClick:function(){return e.selections.setGlobal(!0)}},"All"),u("span",{className:"all-or-none",onClick:function(){return e.selections.setGlobal(!1)}},"None")))},f=function(e){var t=Object(a.useState)(!1),r=t[0],n=t[1];return r?u("div",{className:"menu"},u("div",{className:"menu-button"},u("span",{onClick:function(){return n(!1)}},"\xd7")),u("div",{className:"content"},e.children),u("div",{className:"info"},"Data captured: ",e.capturedAt.local().format("lll"),".")):u("div",{className:"menu-hamburger"},u("div",{onClick:function(){return n(!0)}},"Refine search ..."))},m=r("AgaG"),d=r("e/f6"),p=o.a.createElement,b=r("qeRX"),v=o.a.createElement,y=function(e){var t=e.datum;return v(b.a,{id:t.brewery.id},t.brewery.shortName)},O=function(e){var t=e.datum;return v("a",{href:t.url},v("img",{alt:"",src:t.thumbnailUrl,width:"100px",height:"100px"}),t.available||v("div",{className:"sold-out"},"Out of stock"))},g=function(e){var t=e.datum,r=t.new,n=t.brewery.new,a=Object(d.a)(t).format===c.a.Keg,o=!a&&s.a.some(s.a.tail(t.offers),(function(e){return e.format===c.a.Keg})),i=t.mixed;return v("div",{className:"tooltip"},v("a",{className:"item-link",href:t.url},t.name),v("p",{className:"summary"},t.summary),v("p",{className:"summary"},r&&v("span",{className:"pill new"},"NEW !!!"),n&&v("span",{className:"pill just-added"},"Just added"),a&&v("span",{className:"pill keg"},"Keg"),o&&v("span",{className:"pill keg"},"Keg available"),i&&v("span",{className:"pill mixed"},"Mixed case")),void 0!==t.desc&&v(j,{datum:t}))},h=function(e){var t=e.datum;return v(o.a.Fragment,null,void 0!==t.abv?"".concat(t.abv.toFixed(1),"%"):"?")},w=function(e){var t=e.datum;return v(o.a.Fragment,null,v(N,{offer:Object(d.a)(t)}),s.a.size(t.offers)>1&&v("details",null,v("summary",null,s.a.size(t.offers)-1," more"),s.a.map(s.a.tail(t.offers),(function(e,t){return v(N,{key:t,offer:e})}))))},N=function(e){var t=e.offer,r=P(t),n=E(t);return v("div",{className:"offer"},"\xa3",B(t)," ",v("span",{className:"summary hide-small"},"/ ",n),v("p",{className:"summary"},t.quantity>1?"".concat(t.quantity," \xd7 ").concat(null!==r&&void 0!==r?r:"".concat(n,"s")):r))},j=function(e){var t,r=e.datum;return v("span",{className:"tooltip-text hide-small",style:{display:"hidden"}},void 0!==r.desc&&(t=r.desc,s.a.map(t.split("\n"),(function(e,t){return p("p",{key:t},e)}))),v("div",{className:"disclaimer"},"\xa9 ",r.brewery.shortName))},k=function(e,t){var r=s.a.groupBy(e,(function(e){return e.categories[0]||"Other"}));return s.a.map(t.concat("Other"),(function(e){return{name:e,data:r[e]}}))},P=function(e){return void 0===e.sizeMl?void 0:e.sizeMl<1e3?"".concat(e.sizeMl," ml"):"".concat(e.sizeMl/1e3," litres")},E=function(e){switch(e.format){case c.a.Bottle:return"bottle";case c.a.Can:return"can";case c.a.Keg:return"keg";default:return"item"}},B=function(e){return x(e).toFixed(2).replace(/\.00/,"")},x=function(e){return e.totalPrice/e.quantity},K=function(e){return v(m.b,{sections:k(e.items,e.categories)},v(m.a,{render:y,name:"Brewery",className:"brewery",selector:function(e){return e.brewery}}),v(m.a,{render:O,className:"thumbnail"}),v(m.a,{render:g,name:"Name",className:"name",selector:function(e){return e.name}}),v(m.a,{render:h,name:"ABV",className:"hide-tiny",selector:function(e){return e.abv}}),v(m.a,{render:w,name:"Price",className:"price",selector:function(e){return x(Object(d.a)(e))}}))},D=o.a.createElement;function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var A=function(e){return s.a.uniq(s.a.map(e,(function(e){return e.brewery.shortName})))},C=function(e){var t=function(e,t){return s.a.fromPairs(s.a.map(e,(function(e){return[e,t]})))},r=Object(a.useState)(t(e,!0)),n=r[0],o=r[1];return{selections:n,toggle:function(e){var t=M({},n);t[e]=!t[e],o((function(t){var r=M({},t);return r[e]=!r[e],r}))},setGlobal:function(e){o((function(r){return t(s.a.keys(r),e)}))},setKeys:function(e){o(t(e,!0))}}};t.a=function(e){var t=e.inventory,r=C(["Out of stock"]),n=C(A(t.items)),i=C(["Regular","Mixed case","Keg"]);Object(a.useEffect)((function(){return n.setKeys(A(t.items))}),[t.items]);var u=function(e){return n.selections[e.brewery.shortName]},m=function(e){var t=Object(d.a)(e).format===c.a.Keg;return i.selections.Regular&&!t&&!e.mixed||i.selections["Mixed case"]&&e.mixed||i.selections.Keg&&t},p=function(e){return r.selections["Out of stock"]||e.available};return D(o.a.Fragment,null,D("div",{className:"how-to-use"},"Click on an image to go to the brewery shop!"),D(f,{capturedAt:t.capturedAt},D(l,{title:"Formats",selections:i}),D(l,{title:"Availability",selections:r}),s.a.size(n.selections)>1&&D(l,{title:"Breweries",selections:n})),D("main",null,D(K,{items:t.items.filter((function(e){return u(e)&&m(e)&&p(e)})),categories:t.categories})))}},WbrO:function(e,t,r){"use strict";r.r(t);var n=r("rePB"),a=r("q1tI"),o=r.n(a),i=r("LvDl"),s=r.n(i),c=r("zRbM"),u=r("YtlM"),l=r("BtBB"),f=r("e/f6"),m=r("FdL+"),d=o.a.createElement;function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=function(e){for(var t=s.a.filter(e,(function(e){return Object(f.a)(e).format!==u.a.Keg&&!e.mixed&&e.available})),r=s.a.groupBy(t,(function(e){return e.brewery.id})),n=s.a.shuffle(s.a.flatten(s.a.map(r,(function(e,t){var r=s.a.size(e),n=r>=10?6:r>=5?5:4;return s.a.times(n,(function(){return t}))})))),a=new Set,o=0;a.size<20;){var i=s.a.sample(r[n[o++]]);void 0!==i&&a.add(i)}return Array.from(a)};t.default=function(){var e=Object(a.useState)([]),t=e[0],r=e[1];return Object(a.useEffect)((function(){var e=v(l.a.items);r(s.a.sortBy(s.a.sortBy(e,(function(e){return e.name})),(function(e){return e.brewery.shortName})))}),[]),d(c.a,{title:"Taster menu",desc:"Taster menu of beer prices from across the UK",longDesc:d(o.a.Fragment,null,d("p",null,"We've put together a randomly curated selection of ",20," beers to inspire you."),d("p",null,"Refresh the page to get another selection!"),d("p",null,"Every item here can be delivered directly to your doorstep from the brewery's online shop.")),breweries:l.a.breweries},d(m.a,{inventory:b(b({},l.a),{},{items:t})}))}},YtlM:function(e,t,r){"use strict";var n;r.d(t,"a",(function(){return n})),function(e){e.Bottle="BOTTLE",e.Can="CAN",e.Keg="KEG"}(n||(n={}))},"e/f6":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r("LvDl"),a=r.n(n),o=function(e){var t=a.a.first(e.offers);if(void 0===t)throw new Error("No offers for item");return t}}},[["9i+O",1,2,4,8,7,5,0,3,6]]]);