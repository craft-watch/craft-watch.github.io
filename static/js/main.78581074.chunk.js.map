{"version":3,"sources":["Menu.tsx","SortableTable.tsx","InventoryTable.tsx","App.tsx","index.tsx"],"names":["Menu","props","state","expanded","id","this","renderExpanded","renderCollapsed","className","onClick","setState","Object","entries","breweryVisibility","map","brewery","visible","key","type","checked","onChange","React","Component","Column","PureComponent","SortableTable","sortColIdx","sortDescending","columns","Children","toArray","children","col","idx","selector","join","handleHeaderClick","name","getSortedData","datum","render","sortedData","data","concat","sort","a","b","compareNullable","reverse","renderBrewery","item","renderThumbnail","href","url","alt","src","thumbnailUrl","width","height","available","renderName","summary","renderAbv","abv","toFixed","renderSize","sizeMl","renderPrice","perItemPrice","InventoryTable","items","inventory","_inventory","App","Set","forEach","handleVisibilityChange","filter","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.78581074.chunk.js","sourcesContent":["import React from \"react\";\n\nexport interface MenuProps {\n  breweryVisibility: { [key: string]: boolean; };\n  onChange: (brewery: string) => void;\n}\n  \ninterface State {\n  expanded: boolean;\n}\n  \nexport default class Menu extends React.Component<MenuProps, State> {\n  constructor(props: MenuProps) {\n    super(props);\n    this.state = {\n      expanded: false,\n    };\n  }\n  \n  render() {\n    return (\n      <div id=\"menu\">\n        {this.state.expanded ? this.renderExpanded() : this.renderCollapsed()}\n      </div>\n    );\n  }\n\n  private renderCollapsed() {\n    return (\n      <div className=\"collapsed\">\n        <div className=\"button\" onClick={() => this.setState({ expanded: true })}>&#9776;</div>\n      </div>\n    );\n  }\n\n  private renderExpanded() {\n    return (\n      <div className=\"expanded\">\n        <div className=\"button\" onClick={() => this.setState({ expanded: false })}>&times;</div>\n        <h4>Select breweries</h4>\n        {\n          Object.entries(this.props.breweryVisibility).map(([brewery, visible]) => (\n            <label key={brewery} className=\"selectable\">\n              {brewery}\n              <input\n                type=\"checkbox\"\n                checked={visible}\n                onChange={() => this.props.onChange(brewery)}\n              />\n              <span className=\"checkmark\"></span>\n            </label>\n          ))\n        }\n      </div>\n    );\n  }\n}","import React, { ReactElement } from \"react\";\n\nexport interface ColumnProps<T> {\n  name?: string;\n  className?: string;\n  render: (datum: T) => ReactElement | string | null;\n  selector?: (datum: T) => any;\n}\n\nexport interface SortableTableProps<T> {\n  children: ReactElement<ColumnProps<T>> | Array<ReactElement<ColumnProps<T>>>;\n  data: Array<T>;\n}\n\ninterface State {\n  sortColIdx: number | null;\n  sortDescending: boolean;\n}\n\nexport class Column<T> extends React.PureComponent<ColumnProps<T>> {};\n\nexport default class SortableTable<T> extends React.Component<SortableTableProps<T>, State> {\n  constructor(props: SortableTableProps<T>) {\n    super(props);\n    this.state = {\n      sortColIdx: null,\n      sortDescending: false,\n    };\n  }\n\n  // TODO - memoize sorted data\n  // TODO - reset state if column config changes\n\n  render() {\n    const columns = React.Children.toArray(this.props.children) as Array<ReactElement<ColumnProps<T>>>;\n    return (\n      <table>\n        <thead>\n          <tr>\n            {\n              columns.map((col, idx) => {\n                const className = (this.state.sortColIdx !== idx) ? \"sort-none\"\n                  : this.state.sortDescending ? \"sort-desc\" : \"sort-asc\";\n\n                return (col.props.selector)\n                  ? (\n                    <th\n                      key={idx}\n                      className={[className, col.props.className].join(\" \")}\n                      onClick={() => this.handleHeaderClick(idx)}\n                    >\n                      {col.props.name}\n                    </th>\n                  )\n                  : <th key={idx} className={col.props.className}>{col.props.name}</th>;\n              })\n            }\n          </tr>\n        </thead>\n        <tbody>\n          {\n            this.getSortedData(columns).map((datum, idx) => (\n              <tr key={idx}>\n                {\n                  columns.map((col, idx) => (\n                    <td key={idx} className={col.props.className}>{col.props.render(datum)}</td>\n                  ))\n                }\n              </tr>\n            ))\n          }\n        </tbody>\n      </table>\n    );\n  }\n\n  private handleHeaderClick(idx: number) {\n    this.setState(state => ({\n      sortColIdx: idx,\n      sortDescending: (state.sortColIdx === idx) ? !state.sortDescending : false,\n    }));\n  }\n\n  private getSortedData(columns: Array<ReactElement<ColumnProps<T>>>): Array<T> {\n    const selector = columns[this.state.sortColIdx || 0].props.selector;\n    const sortedData = selector\n      ? this.props.data.concat().sort((a, b) => compareNullable(selector(a), selector(b)))\n      : this.props.data;\n    if (this.state.sortDescending) {\n      sortedData.reverse();\n    }\n    return sortedData;\n  }\n}\n\nconst compareNullable = (a?: any, b?: any) => (a === null) ? 1 : (b === null) ? -1 : (a! > b!) ? 1 : -1;","import SortableTable, { Column } from \"./SortableTable\";\nimport React from \"react\";\nimport { Item } from \"./model\";\n\nexport interface InventoryTableProps {\n  items: Array<Item>;\n}\n\nconst InventoryTable = (props: InventoryTableProps) => (\n  <SortableTable data={props.items}>\n    <Column\n      name=\"Brewery\"\n      render={renderBrewery}\n      selector={(item) => item.brewery}\n    />\n    <Column\n      className=\"thumbnail\"\n      render={renderThumbnail}\n    />\n    <Column\n      name=\"Name\"\n      className=\"name\"\n      render={renderName}\n      selector={(item) => item.name}\n    />\n    <Column\n      name=\"ABV\"\n      render={renderAbv}\n      selector={(item) => item.abv}\n    />\n    <Column\n      name=\"Size\"\n      className=\"size\"\n      render={renderSize}\n      selector={(item) => item.sizeMl}\n    />\n    <Column\n      name=\"Price per item\"\n      render={renderPrice}\n      selector={(item) => item.perItemPrice}\n    />\n  </SortableTable>\n);\n\nconst renderBrewery = (item: Item) => item.brewery;\n\nconst renderThumbnail = (item: Item) => (\n  <a href={item.url}>\n    <img alt=\"\" src={item.thumbnailUrl} width=\"100px\" height=\"100px\" />\n    {item.available || <div className=\"sold-out\">Sold out</div>}\n  </a>\n);\n\nconst renderName = (item: Item) => (\n  <>\n    <a href={item.url}>{item.name}</a>\n    {item.summary && <p className=\"summary\">{item.summary}</p>}\n  </>\n);\n\nconst renderAbv = (item: Item) => item.abv ? `${item.abv.toFixed(1)}%` : \"?\";\n\nconst renderSize = (item: Item) => !item.sizeMl ? \"?\"\n  : (item.sizeMl < 1000) ? `${item.sizeMl} ml`\n  : `${item.sizeMl / 1000} litres`;\n\nconst renderPrice = (item: Item) => `Â£${item.perItemPrice.toFixed(2)}`;\n\nexport default InventoryTable;","import React from \"react\";\nimport _inventory from \"./inventory.json\";\nimport { Inventory } from \"./model\";\nimport Menu from \"./Menu\";\nimport InventoryTable from \"./InventoryTable\";\nimport \"./index.css\";\n\nconst inventory = _inventory as Inventory;\n\ninterface AppState {\n  breweryVisibility: { [key: string]: boolean; }; \n}\n\nclass App extends React.Component<{}, AppState> {\n  constructor(props: {}) {\n    super(props);\n    \n    const breweryVisibility: { [key:string]:boolean; } = {};\n    new Set(inventory.items.map(item => item.brewery))\n      .forEach(b => breweryVisibility[b] = true);\n\n    this.state = {\n      breweryVisibility: breweryVisibility,\n    };\n  }\n\n  render() {\n    return (\n      <div>\n        <Menu\n          breweryVisibility={this.state.breweryVisibility}\n          onChange={(brewery) => this.handleVisibilityChange(brewery)}\n        />\n\n        <InventoryTable\n          items={inventory.items.filter(item => this.state.breweryVisibility[item.brewery])}\n        />\n      </div>\n    );\n  }\n\n  private handleVisibilityChange(brewery: string) {\n    this.setState(state => {\n      const breweryVisibility = { ...state.breweryVisibility };\n      breweryVisibility[brewery] = !breweryVisibility[brewery];\n      return { breweryVisibility };\n    });\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}