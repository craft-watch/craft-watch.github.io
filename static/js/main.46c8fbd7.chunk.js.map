{"version":3,"sources":["SortableTable.tsx","App.tsx","index.tsx"],"names":["Column","React","PureComponent","SortableTable","props","state","sortColIdx","sortDescending","columns","Children","toArray","this","children","map","col","idx","className","selector","key","join","onClick","handleHeaderClick","name","getSortedData","datum","render","setState","sortedData","data","concat","sort","a","b","compareNullable","reverse","Component","renderBrewery","item","brewery","renderThumbnail","href","url","alt","src","thumbnailUrl","width","height","available","renderName","summary","renderAbv","abv","toFixed","renderSize","sizeMl","renderPrice","perItemPrice","App","inventory","items","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.46c8fbd7.chunk.js","sourcesContent":["import React, { ReactElement } from \"react\";\n\nexport interface ColumnProps<T> {\n  name?: string;\n  className?: string;\n  render: (datum: T) => ReactElement | string | null;\n  selector?: (datum: T) => any;\n}\n\nexport interface SortableTableProps<T> {\n  children: ReactElement<ColumnProps<T>> | Array<ReactElement<ColumnProps<T>>>;\n  data: Array<T>;\n}\n\ninterface State {\n  sortColIdx: number | null;\n  sortDescending: boolean;\n}\n\nexport class Column<T> extends React.PureComponent<ColumnProps<T>> {};\n\nexport class SortableTable<T> extends React.Component<SortableTableProps<T>, State> {\n  constructor(props: SortableTableProps<T>) {\n    super(props);\n    this.state = {\n      sortColIdx: null,\n      sortDescending: false,\n    };\n  }\n\n  // TODO - memoize sorted data\n  // TODO - reset state if column config changes\n\n  render() {\n    const columns = React.Children.toArray(this.props.children) as Array<ReactElement<ColumnProps<T>>>;\n    return (\n      <table>\n        <thead>\n          <tr>\n            {\n              columns.map((col, idx) => {\n                const className = (this.state.sortColIdx !== idx) ? \"sort-none\"\n                  : this.state.sortDescending ? \"sort-desc\" : \"sort-asc\";\n\n                return (col.props.selector)\n                  ? (\n                    <th\n                      key={idx}\n                      className={[className, col.props.className].join(\" \")}\n                      onClick={() => this.handleHeaderClick(idx)}\n                    >\n                      {col.props.name}\n                    </th>\n                  )\n                  : <th key={idx} className={col.props.className}>{col.props.name}</th>;\n              })\n            }\n          </tr>\n        </thead>\n        <tbody>\n          {\n            this.getSortedData(columns).map((datum, idx) => (\n              <tr key={idx}>\n                {\n                  columns.map((col, idx) => (\n                    <td key={idx} className={col.props.className}>{col.props.render(datum)}</td>\n                  ))\n                }\n              </tr>\n            ))\n          }\n        </tbody>\n      </table>\n    );\n  }\n\n  handleHeaderClick(idx: number) {\n    this.setState(state => ({\n      sortColIdx: idx,\n      sortDescending: (state.sortColIdx === idx) ? !state.sortDescending : false,\n    }));\n  }\n\n  getSortedData(columns: Array<ReactElement<ColumnProps<T>>>): Array<T> {\n    const selector = columns[this.state.sortColIdx || 0].props.selector;\n    const sortedData = selector\n      ? this.props.data.concat().sort((a, b) => compareNullable(selector(a), selector(b)))\n      : this.props.data;\n    if (this.state.sortDescending) {\n      sortedData.reverse();\n    }\n    return sortedData;\n  }\n}\n\nconst compareNullable = (a?: any, b?: any) => (a === null) ? 1 : (b === null) ? -1 : (a! > b!) ? 1 : -1;","import React from \"react\";\nimport inventory from \"./inventory.json\";\nimport { SortableTable, Column } from \"./SortableTable\";\nimport { Inventory, Item } from \"./model\";\nimport \"./index.css\";\n\nconst App = () => (\n  <div>\n    <SortableTable data={(inventory as Inventory).items}>\n      <Column\n        name=\"Brewery\"\n        render={renderBrewery}\n        selector={(item) => item.brewery}\n      />\n      <Column\n        className=\"thumbnail\"\n        render={renderThumbnail}\n      />\n      <Column\n        name=\"Name\"\n        className=\"name\"\n        render={renderName}\n        selector={(item) => item.name}\n      />\n      <Column\n        name=\"ABV\"\n        render={renderAbv}\n        selector={(item) => item.abv}\n      />\n      <Column\n        name=\"Size\"\n        className=\"size\"\n        render={renderSize}\n        selector={(item) => item.sizeMl}\n      />\n      <Column\n        name=\"Price per item\"\n        render={renderPrice}\n        selector={(item) => item.perItemPrice}\n      />\n    </SortableTable>\n  </div>\n);\n\nconst renderBrewery = (item: Item) => item.brewery;\n\nconst renderThumbnail = (item: Item) => (\n  <a href={item.url}>\n    <img alt=\"\" src={item.thumbnailUrl} width=\"100px\" height=\"100px\" />\n    {item.available || <div className=\"sold-out\">Sold out</div>}\n  </a>\n);\n\nconst renderName = (item: Item) => (\n  <>\n    <a href={item.url}>{item.name}</a>\n    {item.summary && <p className=\"summary\">{item.summary}</p>}\n  </>\n);\n\nconst renderAbv = (item: Item) => item.abv ? `${item.abv.toFixed(1)}%` : \"?\";\n\nconst renderSize = (item: Item) => !item.sizeMl ? \"?\"\n  : (item.sizeMl < 1000) ? `${item.sizeMl} ml`\n  : `${item.sizeMl / 1000} litres`;\n\nconst renderPrice = (item: Item) => `Â£${item.perItemPrice.toFixed(2)}`;\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}